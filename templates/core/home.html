{% load static i18n md %}
<!--
Template: home.html
Version: 1.0.1
Author: vas
Modified: 2025-11-27
-->

<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniHanko - {% trans "ÖH FH OÖ Management System" %}</title>
    <link rel="icon" href="{% static 'img/unihanko-logo.svg' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'core/home.css' %}">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>
<body class="{% if ENVIRONMENT == 'staging' %}staging-env{% endif %}">
    <!-- Language Switcher -->
    <div class="lang-switcher">
        {% with code=request.LANGUAGE_CODE|slice:":2" %}
        <form method="post" action="{% url 'set_language' %}" style="display: inline;">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.path }}">
            <input type="hidden" name="language" value="en">
            <button type="submit" class="flag-btn {% if code == 'en' %}active{% endif %}" aria-label="Switch to English">
                <span class="sr-only">English</span>
                <svg class="flag" viewBox="0 0 60 40" aria-hidden="true">
                    <rect width="60" height="40" fill="#012169" />
                    <path d="M0,0 60,40 M60,0 0,40" stroke="#fff" stroke-width="8" />
                    <path d="M0,0 60,40 M60,0 0,40" stroke="#C8102E" stroke-width="4" />
                    <rect x="26" width="8" height="40" fill="#fff" />
                    <rect y="16" width="60" height="8" fill="#fff" />
                    <rect x="28" width="4" height="40" fill="#C8102E" />
                    <rect y="18" width="60" height="4" fill="#C8102E" />
                </svg>
            </button>
        </form>
        <form method="post" action="{% url 'set_language' %}" style="display: inline;">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.path }}">
            <input type="hidden" name="language" value="de">
            <button type="submit" class="flag-btn {% if code == 'de' %}active{% endif %}" aria-label="Deutsch (Österreich)">
                <span class="sr-only">Deutsch</span>
                <svg class="flag" viewBox="0 0 3 2" aria-hidden="true">
                    <rect width="3" height="2" fill="#ED2939" />
                    <rect y="0.6667" width="3" height="0.6667" fill="#FFFFFF" />
                </svg>
            </button>
        </form>
        {% endwith %}
    </div>

    <!-- Japanese sun accent -->
    <div class="sun"></div>

    <!-- Main content -->
    <div class="container">
        <div class="logo-section">
            <!-- Replace with your actual logo -->
            <div class="hanko-stamp">
                <img src="{% static 'img/unihanko-logo.svg' %}" alt="UniHanko Logo">
            </div>

            <h1 class="logo">UNIHANKO</h1>
            <p class="tagline">{% trans "UAS Upper Austria" %}</p>
            <p class="tagline-jp">{% trans "Students' Union Management System" %}</p>
        </div>

        <div class="buttons">
            <a href="{% url 'admin:index' %}" class="btn">
                {% trans "Back Office" %}
            </a>
            <a href="{% url 'portal:home' %}" class="btn">
                {% trans "Self Service Portal" %}
            </a>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="tech-stack">
                <div class="tech-item">
                    <svg class="tech-icon" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="8" width="18" height="12" rx="1" stroke="#1F88C0" stroke-width="2" fill="none"/>
                        <rect x="6" y="11" width="3" height="6" fill="#1F88C0"/>
                        <rect x="10.5" y="11" width="3" height="6" fill="#1F88C0"/>
                        <rect x="15" y="11" width="3" height="6" fill="#1F88C0"/>
                        <path d="M3 8L12 4L21 8" stroke="#1F88C0" stroke-width="2" fill="none"/>
                    </svg>
                    <span class="tech-name"><a href="https://www.caddyserver.com" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;">Caddy</a></span>
                </div>
                <div class="tech-item">
                    <svg class="tech-icon" viewBox="0 0 24 24" fill="none">
                        <rect x="2" y="10" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="5" y="10" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="8" y="10" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="11" y="10" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="5" y="7" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="8" y="7" width="2.5" height="2.5" fill="#2496ED"/>
                        <rect x="8" y="4" width="2.5" height="2.5" fill="#2496ED"/>
                        <path d="M14 10C14 10 15 9 17 9C19 9 20 10 21 11C22 12 22 13 22 14C22 15 21 16 20 16H3C2 16 2 15 2 14C2 13 2 12 3 11" 
                            stroke="#2496ED" stroke-width="1.5" fill="none"/>
                    </svg>
                    <span class="tech-name"><a href="https://www.docker.com" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;">Docker</a></span>
                </div>
                <div class="tech-item">
                    <svg class="tech-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="#0C4B33"/>
                        <path d="M2 17L12 22L22 17M2 12L12 17L22 12" stroke="#0C4B33" stroke-width="2"/>
                    </svg>
                    <span class="tech-name"><a href="https://www.djangoproject.com" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;">Django</a></span>
                </div>
                <div class="tech-item">
                    <svg class="tech-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z" stroke="#336791" stroke-width="2"/>
                        <circle cx="12" cy="12" r="3" fill="#336791"/>
                    </svg>
                    <span class="tech-name"><a href="https://www.postgresql.org" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;">PostgreSQL</a></span>
                </div>
                <div class="tech-item">
                    <svg class="tech-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M4 6C4 4.89543 4.89543 4 6 4H18C19.1046 4 20 4.89543 20 6V8H4V6Z" fill="#C72C48"/>
                        <rect x="4" y="8" width="16" height="3" fill="#C72C48" opacity="0.7"/>
                        <rect x="4" y="11" width="16" height="3" fill="#C72C48" opacity="0.5"/>
                        <rect x="4" y="14" width="16" height="6" rx="1" fill="#C72C48" opacity="0.3"/>
                        <circle cx="8" cy="6" r="0.8" fill="white"/>
                        <circle cx="10" cy="6" r="0.8" fill="white"/>
                    </svg>
                    <span class="tech-name"><a href="https://www.github.com/minio/minio" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;">MINio</a></span>
                </div>
            </div>

            <div class="footer-links">
                <a href="#" data-modal="about">{% trans "About" %}</a>
                <a href="#" data-modal="privacy">{% trans "Privacy" %}</a>
                <a href="#" data-modal="contact">{% trans "Contact" %}</a>
            </div>

            <div class="credits">
                {% trans "Built with" %} <span class="heart">♥</span> {% trans "by" %} 
                <a href="https://github.com/yourusername" target="_blank">Sven Várszegi</a>
                {% trans "for the" %} <a href="https://www.oeh.fh-ooe.at" target="_blank" rel="noopener" style="text-decoration: none; border-bottom: none !important; align-items: center;"><img src="{% static 'img/unihanko-mark.svg' %}" alt="UniHanko Logo" width="40px" height="40px" style="vertical-align:middle; margin: 0 4px;"></a></span>
                <br>
                <small style="opacity: 0.6; margin-top: 0.5rem; display: block;">
                    © 2025 {% trans "All rights reserved" %} UH:HOME {{ UNIHANKO_VERSION_FULL }}
                </small>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="modal-about" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>{% trans "About UniHanko" %}</h2>
                <button class="modal-close" data-close="about">×</button>
            </div>
            <div class="modal-body">
                {% if flat_about %}{{ flat_about.content|markdown }}{% else %} {% include "pages/_about.inc.html" %}{% endif %}
            </div>
        </div>
    </div>

    <div id="modal-privacy" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>{% trans "Privacy & Legal" %}</h2>
                <button class="modal-close" data-close="privacy">×</button>
            </div>
            <div class="modal-body">
                {% if flat_privacy %}{{ flat_privacy.content|markdown }}{% else %} {% include "pages/_privacy.inc.html" %}{% endif %}
            </div>
        </div>
    </div>

    <div id="modal-contact" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>{% trans "Contact Us" %}</h2>
                <button class="modal-close" data-close="contact">×</button>
            </div>
            <div class="modal-body">
                {% if flat_contact %}{{ flat_contact.content|markdown }}{% else %} {% include "pages/_contact.inc.html" %}{% endif %}
            </div>
        </div>
    </div>

    <script>
        // Cherry blossom petals
        function createPetals() {
            const petalCount = 30;
            for (let i = 0; i < petalCount; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = (Math.random() * 15 + 10) + 's';
                petal.style.animationDelay = Math.random() * 10 + 's';
                document.body.appendChild(petal);
            }
        }
        createPetals();

        // Modal functionality
        document.addEventListener('click', function(e) {
            // Open modal
            const trigger = e.target.closest('[data-modal]');
            if (trigger) {
                e.preventDefault();
                const modalId = 'modal-' + trigger.dataset.modal;
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }

            // Close modal
            const closeBtn = e.target.closest('[data-close]');
            if (closeBtn) {
                const modal = closeBtn.closest('.modal');
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            // Click outside to close
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                });
            }
        });
    </script>
</body>
</html>