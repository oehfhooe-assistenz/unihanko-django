{% extends "portal/base.html" %}
{% load i18n %}

{% block content %}
<h1 class="page-title">{% trans "ECTS Filing Portal" %}</h1>

<div class="card">
    <h2 class="card-title">{% trans "File New Request" %}</h2>
    <p class="text-muted">
        {% trans "Select a semester below to file a new ECTS request" %}
    </p>
</div>

{% for semester in open_semesters %}
<div class="card semester-card">
    <div class="semester-header">
        <div>
            <h3 class="card-title mb-1">{{ semester.display_name }}</h3>
            <p class="text-muted">
                {% trans "Filing Period" %}: {{ semester.filing_start|date:"d.m.Y" }} - {{ semester.filing_end|date:"d.m.Y" }}
            </p>
        </div>
        <div>
            <a href="{% url 'portal:academia:access_login' semester_id=semester.id %}" class="btn">
                {% trans "File Request" %} â†’
            </a>
        </div>
    </div>
</div>
{% empty %}
<div class="card text-center">
    <p class="text-muted">
        {% trans "No open filing periods at this time." %}
    </p>
</div>
{% endfor %}

<div class="card mt-3">
    <h2 class="card-title">{% trans "Check Request Status" %}</h2>
    <p class="text-muted mb-2">
        {% trans "Already filed? Enter your reference code to check status and upload documents." %}
    </p>
    
    <form method="get" action="{% url 'portal:academia:semester_list' %}" class="status-check-form">
        <div class="form-grid-compact">
            <div class="form-group-compact">
                <label class="form-label-compact">{% trans "Reference Code" %}</label>
                <input type="text" 
                       name="reference_code" 
                       class="form-input" 
                       placeholder="{% trans 'e.g., WS24-MUEL-1234' %}"
                       value="{{ request.GET.reference_code }}"
                       required>
                <span class="form-help">{% trans "Format: SSSS-LLLL-####" %}</span>
            </div>
        </div>
        
        <div class="form-actions-compact">
            <button type="submit" name="check_status" value="1" class="btn btn-secondary">
                ğŸ‘ï¸ {% trans "Check Status" %}
            </button>
        </div>
    </form>
</div>

<div class="mt-3">
    <a href="{% url 'portal:home' %}" class="btn btn-secondary">
        â† {% trans "Back to Portal Home" %}
    </a>
</div>

{% endblock %}
