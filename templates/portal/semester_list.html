{% extends "portal/base.html" %}
{% load i18n %}

<!--
Template: semester_list.html
Version: 1.0.0
Author: vas
Modified: 2025-11-27
-->

{% block content %}
<h1 class="page-title">{% trans "ECTS Reimbursement Center" %}</h1>

<div class="card">
    <h2 class="card-title">{% trans "File a New Reimbursement Request" %}</h2>
    <p class="text-muted">
        {% trans "Select a semester below to file a new ECTS reimbursement request" %}
    </p>
</div>

{% for semester in open_semesters %}
<div class="card card-info">
    <div class="semester-header">
        <div>
            <h3 class="card-title mb-1">{{ semester.display_name }}</h3>
            <p class="text-muted">
                <strong>{% trans "Filing Period" %}:</strong> {{ semester.filing_start|date:"d.m.Y" }} - {{ semester.filing_end|date:"d.m.Y" }}
            </p>
        </div>
        <div>
            <a href="{% url 'portal:academia:access_login' semester_id=semester.id %}" class="btn">
                ğŸ“ {% trans "File Request" %}
            </a>
        </div>
    </div>
</div>
{% empty %}
<div class="card text-center">
    <p class="text-muted">
        {% trans "No open filing periods at this time." %}
    </p>
</div>
{% endfor %}

<div class="card mt-3">
    <h2 class="card-title">{% trans "Check My Reimbursement Request Status" %}</h2>
    <p class="text-muted mb-2">
        {% trans "Already filed? Enter your reference code to check your request's status and upload missing documents." %}
    </p>
    
    <form method="get" action="{% url 'portal:academia:semester_list' %}" class="status-check-form">
        <div class="form-grid-compact">
            <div class="form-group-compact">
                <label class="form-label-compact">{% trans "Reference Code" %}</label>
                <input type="text" 
                       name="reference_code" 
                       class="form-input" 
                       placeholder="{% trans 'e.g., WS24-MUEL-1234' %}"
                       value="{{ request.GET.reference_code }}"
                       required>
                <span class="form-help">{% trans "Format: SSSS-LLLL-####" %}</span>
            </div>
        </div>
        
        <div class="form-actions-compact">
            <button type="submit" name="check_status" value="1" class="btn">
                ğŸ‘ï¸ {% trans "Check Status" %}
            </button>
        </div>
    </form>
</div>

<div class="mt-3">
    <a href="{% url 'portal:home' %}" class="btn btn-secondary">
        {% trans "Back to the SSP" %}
    </a>
</div>

{% endblock %}
