{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <!-- KPIs -->
    <div class="col-lg-8">
      <h1 class="mb-3">
        {% trans "Cockpit" %} <small class="text-muted">{% trans "Overview" %}</small>
      </h1>

      <div class="row g-3">
        {% if kpis.people is not None %}
          <div class="col-md-4">
            <div class="card" style="border-radius:14px;">
              <div class="card-body">
                <div class="h5 mb-1">{% trans "Personnel" %}</div>
                <div class="display-6">{{ kpis.people }}</div>
              </div>
            </div>
          </div>
        {% endif %}

        {% if kpis.assignments is not None %}
          <div class="col-md-4">
            <div class="card" style="border-radius:14px;">
              <div class="card-body">
                <div class="h5 mb-1">{% trans "Assignments" %}</div>
                <div class="display-6">{{ kpis.assignments }}</div>
              </div>
            </div>
          </div>
        {% endif %}

        {% if kpis.fiscal_years is not None %}
          <div class="col-md-4">
            <div class="card" style="border-radius:14px;">
              <div class="card-body">
                <div class="h5 mb-1">{% trans "Fiscal Years" %}</div>
                <div class="display-6">{{ kpis.fiscal_years }}</div>
              </div>
            </div>
          </div>
        {% endif %}
      </div>

      <!-- Alerts -->
      <h2 class="mt-4">{% trans "Timeline" %}</h2>
      {% if alerts %}
        <ul class="list-unstyled">
          {% for a in alerts %}
            <li class="mb-2">
              <a href="{{ a.url }}" class="link">â€¢ {{ a.title }}</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted">{% trans "No imminent timeline actions." %}</p>
      {% endif %}
    </div>

    <!-- Recent actions -->
    <div class="col-lg-4">
      <h2 class="mt-3">{% trans "Recent actions" %}</h2>
      {% if recent %}
        <ul class="list-unstyled">
          {% for e in recent %}
            <li class="mb-2">
              <div class="small text-muted">{{ e.time|date:"Y-m-d H:i" }}</div>
              {% if e.url %}
                <a href="{{ e.url }}" class="link">{{ e.label }}: {{ e.object }}</a>
              {% else %}
                {{ e.label }}: {{ e.object }}
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted mb-0">{% trans "None available" %}</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
